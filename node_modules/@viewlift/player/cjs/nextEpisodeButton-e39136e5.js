"use strict";var e=require("@babel/runtime/helpers/classCallCheck"),t=require("@babel/runtime/helpers/createClass"),n=require("@babel/runtime/helpers/inherits"),r=require("@babel/runtime/helpers/possibleConstructorReturn"),i=require("@babel/runtime/helpers/getPrototypeOf"),o=require("video.js"),s=require("./index-b975a253.js");function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=i(e);if(t){var s=i(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return r(this,n)}}require("video.js/dist/video-js.min.css"),require("@babel/runtime/helpers/defineProperty"),require("axios"),require("@babel/runtime/helpers/asyncToGenerator"),require("@babel/runtime/regenerator"),require("@babel/runtime/helpers/toConsumableArray"),require("@babel/runtime/helpers/assertThisInitialized"),require("./library-1d9e03ba.js");var l=o.getComponent("Component"),d=function(r){n(d,l);var i=a(d);function d(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,d),(n=i.call(this,t,r)).playerId=r.playerId,n.seriesData=r.sres,n.currentVideoData=r.res,n.initialiseStructure(),n.loadCSS(),n}return t(d,[{key:"createEl",value:function(){var e=o.dom.createEl("div",{className:"play-next"}),t=o.dom.createEl("div",{className:"play-next-icon",innerHTML:"".concat(s.PlayNextEpisodeSvg(window.controlsColor?window.controlsColor:"white"))});return o.dom.appendContent(e,t),e}},{key:"loadCSS",value:function(){Promise.resolve().then((function(){return require("./nextEpisodeButton-b6e6586f.js")})).then((function(e){var t=document.createElement("style");t.id="multicam",t.append("".concat(e.default)),document.head.appendChild(t)}))}},{key:"initialiseStructure",value:function(){var e=this.el(),t=o.dom.createEl("div",{className:"next-eps nextepisode-hidden"}),n=o.dom.createEl("div",{className:"next",innerHTML:"Next Episode"}),r=o.dom.createEl("div",{className:"nextep-meta-details next-margin"}),i=o.dom.createEl("div",{className:"next-eps-image"}),s=o.dom.createEl("div",{className:"next-eps-description"});o.dom.appendContent(r,i),o.dom.appendContent(r,s),o.dom.appendContent(t,n),o.dom.appendContent(t,r),this.toggleContentOnHover(e,t),o.dom.appendContent(e,t)}},{key:"toggleContentOnHover",value:function(e,t){e.addEventListener("mouseover",(function(){o.dom.removeClass(t,"nextepisode-hidden")})),t.addEventListener("mouseover",(function(){o.dom.removeClass(t,"nextepisode-hidden")})),e.addEventListener("mouseout",(function(){o.dom.addClass(t,"nextepisode-hidden")})),t.addEventListener("mouseout",(function(){o.dom.addClass(t,"nextepisode-hidden")}))}}]),d}(),u=function(e,t){for(var n=-1,r=0;r<e.length;r++)for(var i=0;i<e[r].episodes.length;i++)if(e[r].episodes[i].id===t){n=r;break}return n},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(!(e&&t>=0))return{prevEp:null,nextEp:null};var n=e.episodes.length,r=t-1>=0?t-1:n-1,i=(t+1)%n,o=n>1?e.episodes[r]:null,s=n>1?e.episodes[i]:null;return r===i&&(0===r?s=null:o=null),{prevEp:o,nextEp:s,prevEpIdx:r,nextEpIdx:i}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=null;return e?(e.episodes.forEach((function(e,r){e.gist.id===t&&(n=r)})),n):null},m=function(e){o.dom.$(".next-eps"),o.dom.$(".play-next").onclick=function(){var t=sessionStorage.getItem("token");s.VLPlayerCore().load("my-player",e.gist.id,t).then((function(e){console.log(e)}))},o.dom.$(".next-eps-image").innerHTML="<img src=".concat(e.gist.videoImageUrl,"/>"),o.dom.$(".next-eps-description").innerHTML="<div class='next-eps-title'>".concat(e.title,"</div>\n    <div class='next-eps-description-details'>").concat(e.gist.description,"</div>")};exports.default=d,exports.initaliseFunctionality=function(e,t){var n=u(e,t.video.gist.id),r=p(e[n],t.video.gist.id),i=c(e[n],r);m(i.nextEp)};
