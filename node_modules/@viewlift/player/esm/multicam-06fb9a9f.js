import e from"@babel/runtime/helpers/classCallCheck";import t from"@babel/runtime/helpers/createClass";import i from"@babel/runtime/helpers/assertThisInitialized";import l from"@babel/runtime/helpers/inherits";import r from"@babel/runtime/helpers/possibleConstructorReturn";import o from"@babel/runtime/helpers/getPrototypeOf";import n from"@babel/runtime/helpers/defineProperty";import s from"video.js";import{s as a,V as c}from"./index-cb62414e.js";import"video.js/dist/video-js.min.css";import"axios";import"@babel/runtime/helpers/asyncToGenerator";import"@babel/runtime/regenerator";import"@babel/runtime/helpers/toConsumableArray";import"./library-ad46544b.js";function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,l=o(e);if(t){var n=o(this).constructor;i=Reflect.construct(l,arguments,n)}else i=l.apply(this,arguments);return r(this,i)}}var m=s.getComponent("Component"),d=function(r){l(d,m);var o=u(d);function d(t){var l,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,d),l=o.call(this,t,r),n(i(l),"multicamCssPositioning",(function(e,t){var i=window.getComputedStyle(document.getElementById(t),null),l=i.getPropertyValue("height"),r=i.getPropertyValue("width"),o=l.slice(0,-2);r.slice(0,-2)-135<=135?(e.style.bottom="290px",e.style.height="352px"):(e.style.bottom="".concat(o-135,"px"),e.style.height="".concat(o-85,"px"))})),l.playerId=r.playerId,l.streams=null==r?void 0:r.streams,l.config=null==r?void 0:r.config,l.createUI(null==r?void 0:r.streams),l}return t(d,[{key:"createEl",value:function(){return s.dom.createEl("div",{className:"multicamera-parent"})}},{key:"createUI",value:function(e){var t,i,l,r,o,n,s=this,a=this.el();null!=this&&null!==(t=this.config)&&void 0!==t&&t.liveui&&null!=this&&null!==(i=this.config)&&void 0!==i&&i.liveVideo||0==(null==this||null===(l=this.config)||void 0===l?void 0:l.liveui)&&0==(null==this||null===(r=this.config)||void 0===r?void 0:r.liveVideo)?null==a||null===(o=a.classList)||void 0===o||o.add("".concat(this.config.skin)):null==a||null===(n=a.classList)||void 0===n||n.add("default"),this.loadCSS();for(var c=0;c<e.length;c++)this.createTile(e[c],c);this.multicamCssPositioning(a,this.playerId),window.onresize=function(){s.multicamCssPositioning(a,s.playerId)}}},{key:"getOffset",value:function(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}},{key:"createTile",value:function(e,t){var i=this,l=this.el(),r=s.dom.createEl("div",{className:"tile ".concat(t)});0==t&&(r.style.border="2px solid red"),r.style.backgroundImage="url(".concat(e.img,")"),s.dom.appendContent(l,r);var o=sessionStorage.getItem("token");return r.addEventListener("click",(function(t){a(i.playerId),i.removeSelectedTile();var l=document.getElementsByClassName("".concat(t.srcElement.className))[0];l&&(l.style.border="2px solid red"),c().load(i.playerId,e.id,o).then((function(e){c().play(i.playerId)}))})),l}},{key:"removeSelectedTile",value:function(){for(var e=document.getElementsByClassName("tile"),t=0;t<e.length;t++)e[t].style.border=0}},{key:"loadCSS",value:function(){import("./multicam-53587dde.js").then((function(e){var t=document.createElement("style");t.id="multicam",t.append("".concat(e.default)),document.head.appendChild(t)}))}}]),d}();export{d as default};
