"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{4458:function(e,t,n){n.r(t);var a,o=n(95),r=n(5228),i=n.n(r),s=n(7567),d=n.n(s),l="6.9.0",u=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},c=function(e,t,n){u(e,n),e.trigger({type:t+n.type,originalEvent:n})},h=function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&c(e,"content",t):c(e,"ad",t))},f=function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(u(e,t),e.trigger("resumeended")):c(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(c(e,"content",t),e.trigger("readyforpostroll"))},p=function(e,t){if(("loadstart"!==t.type||e.ads._hasThereBeenALoadStartDuringPlayerLife)&&("loadeddata"!==t.type||e.ads._hasThereBeenALoadedData)&&("loadedmetadata"!==t.type||e.ads._hasThereBeenALoadedMetaData)){if(e.ads.inAdBreak())c(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;c(e,"content",t)}}},g=function(e,t){e.ads.inAdBreak()?c(e,"ad",t):e.ads.isContentResuming()&&c(e,"content",t)};function y(e){"playing"===e.type?h(this,e):"ended"===e.type?f(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?p(this,e):"play"===e.type?g(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?c(this,"content",e):c(this,"ad",e))}var m={},v=function(e){if(o.Z.dom.isInFrame()&&"function"!=typeof i().__tcfapi){for(var t,n=i(),a={};n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(e){}if(n===i().top)break;n=n.parent}t&&(i().__tcfapi=function(e,n,o,r){var i=Math.random()+"";a[i]=o,t.postMessage({__tcfapiCall:{command:e,parameter:r,version:n,callId:i}},"*")},i().addEventListener("message",function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof a[n.callId]&&(a[n.callId](n.returnValue,n.success),a[n.callId]=null)},!1))}},A=function(){v(),"function"==typeof i().__tcfapi&&i().__tcfapi("addEventListener",2,function(e,t){t&&(m=e)})},_=function(e,t){return t?encodeURIComponent(e):e},S=function(e,t,n){if(e&&e[n])for(var a=e[n],o=Object.keys(a),r=0;r<o.length;r++)t["{mediainfo."+n+"."+o[r]+"}"]=a[o[r]]};function k(e,t,n){var a=this,r={};e=e.replace(/{([^}=]+)=([^}]+)}/g,function(e,t,n){return r["{"+t+"}"]=n,"{"+t+"}"}),void 0===t&&(t=!1);var s={};for(var l in void 0!==n&&(s=n),s["{player.id}"]=this.options_["data-player"]||this.id_,s["{player.height}"]=this.currentHeight(),s["{player.width}"]=this.currentWidth(),s["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",s["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",s["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",s["{player.duration}"]=this.duration(),s["{player.pageUrl}"]=o.Z.dom.isInFrame()?d().referrer:i().location.href,s["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",s["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",s["{timestamp}"]=new Date().getTime(),s["{document.referrer}"]=d().referrer,s["{window.location.href}"]=i().location.href,s["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach(function(e){a.mediainfo&&a.mediainfo[e]?s["{mediainfo."+e+"}"]=a.mediainfo[e]:r["{mediainfo."+e+"}"]?s["{mediainfo."+e+"}"]=r["{mediainfo."+e+"}"]:s["{mediainfo."+e+"}"]=""}),S(this.mediainfo,s,"custom_fields"),S(this.mediainfo,s,"customFields"),Object.keys(m).forEach(function(e){s["{tcf."+e+"}"]=m[e]}),s["{tcf.gdprAppliesInt}"]=m.gdprApplies?1:0,s)e=e.split(l).join(_(s[l],t));for(var u in e=e.replace(/{pageVariable\.([^}]+)}/g,function(e,n){for(var a,s=i(),d=n.split("."),l=0;l<d.length;l++)l===d.length-1?a=s[d[l]]:s=s[d[l]];var u=typeof a;return null===a?"null":void 0===a?r["{pageVariable."+n+"}"]?r["{pageVariable."+n+"}"]:(o.Z.log.warn('Page variable "'+n+'" not found'),""):"string"!==u&&"number"!==u&&"boolean"!==u?(o.Z.log.warn('Page variable "'+n+'" is not a supported type'),""):_(String(a),t)}),r)e=e.replace(u,r[u]);return e}var P={};P.processMetadataTracks=function(e,t){for(var n=e.textTracks(),a=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},o=0;o<n.length;o++)a(n[o]);n.addEventListener("addtrack",function(e){a(e.track)})},P.setMetadataTrackMode=function(e){},P.getSupportedAdCue=function(e,t){return t},P.isSupportedAdCue=function(e,t){return!0},P.getCueId=function(e,t){return t.id};var b=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function C(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}P.processAdTrack=function(e,t,n,a){e.ads.includedCues={};for(var r=0;r<t.length;r++){var i=t[r],s=this.getSupportedAdCue(e,i);if(!this.isSupportedAdCue(e,i)){o.Z.log.warn("Skipping as this is not a supported ad cue.",i);return}var d=this.getCueId(e,i),l=i.startTime;if(void 0!==d&&e.ads.includedCues[d]){o.Z.log("Skipping ad already seen with ID "+d);return}a&&a(e,s,d,l),n(e,s,d,l),b(e,d)}};var T={},R=o.Z;T.isMiddlewareMediatorSupported=function(){if(R.browser.IS_IOS||R.browser.IS_ANDROID);else if(R.use&&R.middleware&&R.middleware.TERMINATOR)return!0;return!1},T.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,R.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch(function(t){"NotAllowedError"!==t.name||o.Z.browser.IS_SAFARI||e.trigger("pause")})}}},T.testHook=function(e){R=e};var L=T.playMiddleware,B=T.isMiddlewareMediatorSupported,w=function(){function e(){}return e.getState=function(t){if(t&&e.states_&&e.states_[t])return e.states_[t]},e.registerState=function(t,n){if("string"!=typeof t||!t)throw Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),M=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var a=arguments.length,o=Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];n.init.apply(n,[t].concat(o))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){o.Z.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){o.Z.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){o.Z.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){o.Z.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){o.Z.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function Z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}w.registerState("State",M);var N=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}Z(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=w.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=w.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(M);w.registerState("AdState",N);var I=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=w.getState("BeforePreroll"),n=w.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(M);w.registerState("ContentState",I);var E=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){o.Z.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(w.getState("ContentState"));w.registerState("AdsDone",E);var j={start:function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){t=o.Z.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var t,n=e.$(".vjs-tech"),a=e.textTracks?e.textTracks():[],r=[],i={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(i.style=n.getAttribute("style"));for(var s=0;s<a.length;s++){var d=a[s];r.push({track:d,mode:d.mode}),d.mode="disabled"}return i.suppressedTracks=r,i}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},end:function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n,r=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore){e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,t();return}var i=e.$(".vjs-tech"),s=20,d=r.suppressedTracks,l=function(){for(var e=0;e<d.length;e++)(n=d[e]).track.mode=n.mode},u=function(){var t;if(o.Z.browser.IS_IOS&&e.ads.isLive(e)){if(r.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+r.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var n=e.play();n&&n.catch&&n.catch(function(e){o.Z.log.warn("Play promise rejected in IOS snapshot resume",e)})}}else if(r.ended)e.currentTime(e.duration());else{e.currentTime(r.currentTime);var a=e.play();a&&a.catch&&a.catch(function(e){o.Z.log.warn("Play promise rejected in snapshot resume",e)})}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},c=function t(){if(e.off("contentcanplay",t),a&&e.clearTimeout(a),(i=e.el().querySelector(".vjs-tech")).readyState>1||void 0===i.seekable||i.seekable.length>0)return u();if(s--)e.setTimeout(t,50);else try{u()}catch(e){o.Z.log.warn("Failed to resume the content after an advertisement",e)}};if("style"in r&&i.setAttribute("style",r.style||""),e.ads.videoElementRecycled())e.one("resumeended",function(){delete e.ads.snapshot,t()}),e.one("contentloadedmetadata",l),o.Z.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(r.sources),e.one("contentcanplay",c),a=e.setTimeout(c,2e3);else{if(l(),!e.ended()){var h=e.play();h&&h.catch&&h.catch(function(e){o.Z.log.warn("Play promise rejected in snapshot restore",e)})}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())}},x=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var a=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(a=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout(function(){e.trigger("adtimeout")},a),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?o.Z.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",function(){t.ads.debug("Received loadstart event"),e()}))},n.noPreroll=function(){var e=this;this.afterLoadStart(function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)})},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart(function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")})},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart(function(){t.resumeAfterNoPreroll(e)})},n.onAdsError=function(e){var t=this;o.Z.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart(function(){t.resumeAfterNoPreroll(e)})},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?o.Z.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,j.start(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,j.end(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?o.Z.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart(function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)})},n.onAdTimeout=function(e){var t=this;this.afterLoadStart(function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)})},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?o.Z.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate){if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,function(e){})}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")}},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||o.Z.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(w.getState("AdState"));w.registerState("Preroll",x);var D=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=w.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(w.getState("ContentState"));w.registerState("BeforePreroll",D);var O=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",j.start(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),j.end(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(w.getState("AdState"));w.registerState("Midroll",O);var F=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=w.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout(function(){e.trigger("adtimeout")},n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?o.Z.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,j.start(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=w.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),j.end(t,function(){e.transitionTo(n)}))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?o.Z.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=w.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=w.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?o.Z.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=w.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(w.getState("AdState"));w.registerState("Postroll",F);var U=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=w.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=w.getState("Midroll");this.transitionTo(e)},t}(w.getState("ContentState"));w.registerState("ContentPlayback",U);var V=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=w.getState("StitchedAdRoll");this.transitionTo(e)},t}(w.getState("ContentState"));w.registerState("StitchedContentPlayback",V);var H=function(e){function t(){return e.apply(this,arguments)||this}Z(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",j.start(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=w.getState("StitchedContentPlayback");j.end(this.player),this.transitionTo(e)},t}(w.getState("AdState"));w.registerState("StitchedAdRoll",H);var q=T.isMiddlewareMediatorSupported,W=o.Z.getTech("Html5").Events,z={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:o.Z.options.normalizeAutoplay||!1},$=function(e){var t=this,n=o.Z.mergeOptions(z,e),a=[];W.concat(["firstplay","loadedalldata"]).forEach(function(e){-1===a.indexOf(e)&&a.push(e)}),t.on(a,y),q()||(n.debug&&o.Z.log("Using cancelContentPlay to block content playback"),t.on("play",C)),t.setTimeout(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||o.Z.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")},5e3),t.on("ended",function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")}),t.on("contenttimeupdate",function(){t.removeClass("vjs-waiting")}),t.on(["addurationchange","adcanplay"],function(){if(!(t.ads.settings.stitchedAds||t.hasStarted())&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch(function(e){o.Z.log.warn("Play promise rejected when playing ad",e)})}}),t.on("nopreroll",function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0}),t.on("nopostroll",function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0}),t.on("playing",function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1}),t.on("play",function(){t.ads._playRequested=!0}),t.one("loadstart",function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),t.on("loadeddata",function(){t.ads._hasThereBeenALoadedData=!0}),t.on("loadedmetadata",function(){t.ads._hasThereBeenALoadedMetaData=!0}),t.ads={disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:l,reset:function(){t.ads.disableNextSnapshotRestore=!1,t.ads._contentEnding=!1,t.ads._contentHasEnded=!1,t.ads.snapshot=null,t.ads.adType=null,t.ads._hasThereBeenALoadedData=!1,t.ads._hasThereBeenALoadedMetaData=!1,t.ads._cancelledPlay=!1,t.ads._shouldBlockPlay=!1,t.ads._playBlocked=!1,t.ads.nopreroll_=!1,t.ads.nopostroll_=!1,t.ads._playRequested=!1},startLinearAdMode:function(){t.ads._state.startLinearAdMode()},endLinearAdMode:function(){t.ads._state.endLinearAdMode()},skipLinearAdMode:function(){t.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(o.Z.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(t.ads.shouldPlayContentBehindAd(t))return!1;if(!this.snapshot)throw Error("You cannot use videoElementRecycled while there is no snapshot.");var e=t.tech_.src()!==this.snapshot.src,n=t.currentSrc()!==this.snapshot.currentSrc;return e||n},isLive:function(e){return(void 0===e&&(e=t),"boolean"==typeof e.ads.settings.contentIsLive)?e.ads.settings.contentIsLive:e.duration()===1/0||"8"===o.Z.browser.IOS_VERSION&&0===e.duration()},shouldPlayContentBehindAd:function(e){if(void 0===e&&(e=t),e)return!!e.ads.settings.liveCuePoints&&!o.Z.browser.IS_IOS&&!o.Z.browser.IS_ANDROID&&e.duration()===1/0;throw Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(e){return void 0===e&&(e=t),!this.shouldPlayContentBehindAd(e)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var e=t.$(".vjs-tech");e&&e.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?o.Z.log("ADS: "+t[0]):o.Z.log.apply(o.Z,["ADS:"].concat(t))}}},t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(w.getState("StitchedContentPlayback"))(t):t.ads._state=new(w.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=P,t.ads.adMacroReplacement=k.bind(t),t.ads.contentSrc=t.currentSrc(),t.ads._seenInitialLoadstart=!1,t.on("loadstart",function(){if(!t.ads.inAdBreak()){var e=t.currentSrc();e!==t.ads.contentSrc&&(t.ads._seenInitialLoadstart&&t.trigger({type:"contentchanged"}),t.trigger({type:"contentupdate",oldValue:t.ads.contentSrc,newValue:e}),t.ads.contentSrc=e),t.ads._seenInitialLoadstart=!0}}),t.on("contentchanged",t.ads.reset);var r=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&o.Z.browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var a=e[n];"showing"===a.mode&&(a.mode="disabled")}};t.ready(function(){t.textTracks().addEventListener("change",r)}),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],function(e){t.ads._state.handleEvent(e.type)}),t.on("dispose",function(){t.ads.reset(),t.textTracks().removeEventListener("change",r)}),A(),t.ads.listenToTcf=A};$.VERSION=l,function(){if(o.Z.getPlugin)return!!o.Z.getPlugin("ads");var e=o.Z.getComponent("Player");return!!(e&&e.prototype.ads)}(o.Z)||((o.Z.registerPlugin||o.Z.plugin)("ads",$),B()&&!o.Z.usingContribAdsMiddleware_&&(o.Z.use("*",L),o.Z.usingContribAdsMiddleware_=!0,o.Z.log.debug("Play middleware has been registered with videojs"))),t.default=$}}]);